<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuminaExchange íˆ¬ì ìˆ˜ìµ ì‹œë®¬ë ˆì´í„°</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #4f46e5;
            --primary-light: #6366f1;
            --accent: #0891b2;
            --success: #059669;
            --warning: #d97706;
            --danger: #dc2626;
            --purple: #7c3aed;
            --bg-dark: #f8fafc;
            --bg-card: rgba(255, 255, 255, 0.9);
            --border: rgba(0, 0, 0, 0.1);
            --text: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #faf8f5 0%, #f5f0e8 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text);
        }
        
        /* Header */
        .header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 14px;
        }
        
        .logo-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            object-fit: contain;
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #7a7a7a 0%, #c0c0c0 25%, #e8e8e8 50%, #c0c0c0 75%, #7a7a7a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .live-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--success);
        }
        
        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--success);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Main */
        .main {
            max-width: 1500px;
            margin: 0 auto;
            padding: 40px;
        }
        
        /* Section */
        .section {
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 28px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .section-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .section-icon.orange {
            background: linear-gradient(135deg, var(--warning), #fbbf24);
        }
        
        .section-icon.cyan {
            background: linear-gradient(135deg, #06b6d4, var(--accent));
        }
        
        .section-icon.purple {
            background: linear-gradient(135deg, #8b5cf6, var(--purple));
        }
        
        .section-icon.green {
            background: linear-gradient(135deg, var(--success), #34d399);
        }
        
        /* Input Grid */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .input-group label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            padding: 14px 18px;
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text);
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
        }

        .input-group select option {
            background: #ffffff;
        }
        
        /* Divider */
        .section-divider {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 28px 0;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .section-divider::before,
        .section-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
        }
        
        /* Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .stat-card {
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .stat-card.orange {
            border-color: rgba(217, 119, 6, 0.3);
            background: rgba(251, 191, 36, 0.1);
        }

        .stat-card.cyan {
            border-color: rgba(8, 145, 178, 0.3);
            background: rgba(8, 145, 178, 0.08);
        }

        .stat-card.purple {
            border-color: rgba(124, 58, 237, 0.3);
            background: rgba(124, 58, 237, 0.08);
        }

        .stat-card.green {
            border-color: rgba(5, 150, 105, 0.3);
            background: rgba(5, 150, 105, 0.08);
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text);
        }
        
        .stat-card.orange .stat-value { color: var(--warning); }
        .stat-card.cyan .stat-value { color: var(--accent); }
        .stat-card.purple .stat-value { color: var(--purple); }
        .stat-card.green .stat-value { color: var(--success); }
        
        .stat-sub {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        /* Highlight Box */
        .highlight-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 20px;
            padding: 28px;
            text-align: center;
        }
        
        .highlight-box .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .highlight-box .value {
            font-size: 3rem;
            font-weight: 900;
            color: var(--success);
            line-height: 1.2;
        }
        
        .highlight-box .sub {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
        
        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            text-align: left;
            padding: 14px 12px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }
        
        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }
        
        .data-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .cell-main {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text);
        }
        
        .cell-sub {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 2px;
        }
        
        .trend-up { color: var(--success) !important; }
        .trend-down { color: var(--danger) !important; }
        .text-cyan { color: var(--accent) !important; }
        .text-purple { color: var(--purple) !important; }
        .text-orange { color: var(--warning) !important; }
        
        /* Tags */
        .tag {
            display: inline-flex;
            align-items: center;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .tag.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .tag.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .tag.info {
            background: rgba(99, 102, 241, 0.15);
            color: var(--primary-light);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        
        .compare-card {
            background: #ffffff;
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
        }

        .compare-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .compare-card.lp {
            border: 1px solid rgba(8, 145, 178, 0.25);
        }

        .compare-card.lp::before {
            background: linear-gradient(90deg, #0891b2, var(--accent));
        }

        .compare-card.equity {
            border: 1px solid rgba(124, 58, 237, 0.25);
        }

        .compare-card.equity::before {
            background: linear-gradient(90deg, #7c3aed, var(--purple));
        }
        
        .compare-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .compare-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            font-weight: 700;
        }
        
        .compare-card.lp .compare-title { color: var(--accent); }
        .compare-card.equity .compare-title { color: var(--purple); }
        
        .compare-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .compare-card.lp .compare-icon { background: rgba(34, 211, 238, 0.2); }
        .compare-card.equity .compare-icon { background: rgba(168, 85, 247, 0.2); }
        
        /* Info Box */
        .info-box {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px;
            background: rgba(79, 70, 229, 0.06);
            border: 1px solid rgba(79, 70, 229, 0.15);
            border-radius: 14px;
            margin-top: 20px;
        }

        .info-box .icon {
            width: 32px;
            height: 32px;
            background: rgba(79, 70, 229, 0.12);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .info-box .text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .info-box .text strong {
            color: var(--primary);
        }
        
        /* Summary Table */
        .summary-section {
            background: linear-gradient(135deg, rgba(5, 150, 105, 0.06), rgba(5, 150, 105, 0.02));
            border: 1px solid rgba(5, 150, 105, 0.2);
        }

        .vault-tabs {
            display: flex;
            gap: 10px;
        }

        .vault-tab {
            padding: 10px 20px;
            background: #f1f5f9;
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .vault-tab:hover {
            background: #e2e8f0;
        }

        .vault-tab.active {
            background: rgba(5, 150, 105, 0.15);
            border-color: rgba(5, 150, 105, 0.4);
            color: var(--success);
        }

        .vault-content {
            display: none;
        }

        .vault-content.active {
            display: block;
        }

        .roi-badge {
            display: inline-flex;
            padding: 8px 16px;
            background: rgba(5, 150, 105, 0.15);
            border-radius: 10px;
            color: var(--success);
            font-weight: 800;
            font-size: 1.1rem;
        }
        
        .total-cell {
            color: var(--success);
            font-weight: 800;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 40px;
            color: var(--text-muted);
            font-size: 0.85rem;
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }
        
        /* Responsive */
        @media (max-width: 1000px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .main { padding: 20px; }
            .header { padding: 16px 20px; }
            .stat-value { font-size: 1.4rem; }
            .highlight-box .value { font-size: 2rem; }
        }

        /* ì‚¬ì´ë“œ ì„¤ì • ë²„íŠ¼ */
        .side-settings-btn {
            position: fixed;
            right: 24px;
            top: 50%;
            transform: translateY(-50%);
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border: none;
            border-radius: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 8px 32px rgba(79, 70, 229, 0.3);
            transition: all 0.3s;
            z-index: 1000;
        }

        .side-settings-btn:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 12px 40px rgba(79, 70, 229, 0.4);
        }

        /* ì„¤ì • íŒì—… */
        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .settings-overlay.active {
            display: flex;
        }

        .settings-popup {
            background: #ffffff;
            border-radius: 24px;
            padding: 32px;
            width: 90%;
            max-width: 480px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 24px 80px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .settings-popup h2 {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .settings-popup .close-btn {
            position: absolute;
            top: 24px;
            right: 24px;
            width: 36px;
            height: 36px;
            background: #f1f5f9;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .settings-popup .close-btn:hover {
            background: #e2e8f0;
        }

        .settings-popup .input-group {
            margin-bottom: 16px;
        }

        .settings-popup .input-group label {
            display: block;
            margin-bottom: 6px;
        }
    </style>
</head>
<body>
    <!-- ì‚¬ì´ë“œ ì„¤ì • ë²„íŠ¼ -->
    <button class="side-settings-btn" onclick="openSettings()">âš™ï¸</button>

    <!-- ì„¤ì • íŒì—… -->
    <div class="settings-overlay" id="settingsOverlay" onclick="closeSettingsOutside(event)">
        <div class="settings-popup">
            <button class="close-btn" onclick="closeSettings()">âœ•</button>
            <h2>âš™ï¸ íˆ¬ì ì„¤ì •</h2>

            <div class="input-group">
                <label>ì´ íˆ¬ìê¸ˆ (ì–µì›)</label>
                <input type="number" id="popupTotalInvestment" value="10" min="1">
            </div>
            <div class="input-group">
                <label>ì§€ë¶„ íˆ¬ì ë¹„ìœ¨ (%)</label>
                <input type="number" id="popupEquityRatio" value="50" min="0" max="100">
            </div>
            <div class="input-group">
                <label>ë‚´ê°€ ìœ ì¹˜í•œ ë ˆí¼ëŸ´ ìœ ì € ìˆ˜</label>
                <input type="number" id="popupMyReferrals" value="500" min="0" step="100">
            </div>
            <div class="input-group">
                <label>1ì¸ë‹¹ ì›” ê±°ë˜ëŸ‰ (ë°±ë§Œ$)</label>
                <input type="number" id="popupVolumePerUser" value="6" min="1">
            </div>
            <div class="input-group">
                <label>íŠ¸ë ˆì´ë” ì†ì‹¤ë¥ </label>
                <select id="popupLossRate">
                    <option value="0.001" selected>0.1% (ê¸°ë³¸)</option>
                    <option value="0.004">0.4%</option>
                    <option value="0.005">0.5%</option>
                </select>
            </div>
            <div class="input-group">
                <label>í™˜ìœ¨ (ì›/ë‹¬ëŸ¬)</label>
                <input type="number" id="popupExchangeRate" value="1450">
            </div>
        </div>
    </div>

    <header class="header">
        <div class="logo">
            <img src="https://raw.githubusercontent.com/jilee1212/luminadex-assets/main/Lumina_logo.png" alt="Lumina Logo" class="logo-icon" style="width: 44px; height: 44px; object-fit: contain;">
            <span class="logo-text">LuminaExchange</span>
        </div>
    </header>
    
    <main class="main">
        <!-- ê¸°ë³¸ ì„¤ì • -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">
ê¸°ë³¸ íˆ¬ì ì„¤ì •
                </div>
            </div>
            <div class="input-grid">
                <div class="input-group">
                    <label>ì´ íˆ¬ìê¸ˆ (ì–µì›)</label>
                    <input type="number" id="totalInvestment" value="10" min="1">
                </div>
                <div class="input-group">
                    <label>ì§€ë¶„ íˆ¬ì ë¹„ìœ¨ (%)</label>
                    <input type="number" id="equityRatio" value="50" min="0" max="100">
                </div>
                <div class="input-group">
                    <label>LP íˆ¬ì ë¹„ìœ¨ (%)</label>
                    <input type="number" id="lpRatio" value="50" readonly>
                </div>
                <div class="input-group">
                    <label>1ì¸ë‹¹ ì›” ê±°ë˜ëŸ‰ (ë°±ë§Œ$)</label>
                    <input type="number" id="volumePerUser" value="6" min="1">
                </div>
                <div class="input-group">
                    <label>íŠ¸ë ˆì´ë” ì†ì‹¤ë¥ </label>
                    <select id="lossRate">
                        <option value="0.001" selected>0.1% (ê¸°ë³¸)</option>
                        <option value="0.004">0.4%</option>
                        <option value="0.005">0.5%</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>í™˜ìœ¨ (ì›/ë‹¬ëŸ¬)</label>
                    <input type="number" id="exchangeRate" value="1450">
                </div>
            </div>
            
            <div class="section-divider">íˆ¬ì ë‚´ì—­</div>
            
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-label">ì§€ë¶„ íˆ¬ìê¸ˆ</div>
                    <div class="stat-value" id="equityInvestKRW">5ì–µ</div>
                    <div class="stat-sub" id="equityInvestUSD">$357,143</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">LP íˆ¬ìê¸ˆ</div>
                    <div class="stat-value" id="lpInvestKRW">5ì–µ</div>
                    <div class="stat-sub" id="lpInvestUSD">$357,143</div>
                </div>
                <div class="stat-card purple">
                    <div class="stat-label">ì§€ë¶„ ë°°ë‹¹ ë¹„ìœ¨</div>
                    <div class="stat-value" id="equityStakeDisplay">5%</div>
                    <div class="stat-sub">í”„ë¡œí† ì½œ ìˆ˜ìµì˜</div>
                </div>
            </div>
        </div>
        
        <!-- ì„¹ì…˜ 1: ë‚´ ë ˆí¼ëŸ´ ìˆ˜ìµ (ê³ ì •) -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">
ë‚´ ë ˆí¼ëŸ´ ìˆ˜ìµ
                </div>
                <span class="tag info">ë‚´ê°€ ìœ ì¹˜í•œ ìœ ì € ê¸°ì¤€</span>
            </div>
            
            <div class="input-grid" style="max-width: 400px; margin-bottom: 24px;">
                <div class="input-group">
                    <label>ë‚´ê°€ ìœ ì¹˜í•œ ë ˆí¼ëŸ´ ìœ ì € ìˆ˜</label>
                    <input type="number" id="myReferrals" value="500" min="0" step="100">
                </div>
            </div>
            
            <div class="stats-row">
                <div class="stat-card orange">
                    <div class="stat-label">ë‚´ ë ˆí¼ëŸ´ ìœ ì €</div>
                    <div class="stat-value" id="myRefUsers">500ëª…</div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-label">ë‚´ ìœ ì € ì›” ê±°ë˜ëŸ‰</div>
                    <div class="stat-value" id="myRefVolume">$3B</div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-label">ì ìš© í‹°ì–´</div>
                    <div class="stat-value" id="myRefTier">Tier 5</div>
                    <div class="stat-sub">25% ë³´ìƒ</div>
                </div>
                <div class="stat-card orange">
                    <div class="stat-label">ë ˆí¼ëŸ´ ìˆ˜ìµ (ì—°)</div>
                    <div class="stat-value" id="myRefIncome">$4.5M</div>
                    <div class="stat-sub" id="myRefIncomeKRW">63ì–µ</div>
                </div>
            </div>
            
            <div class="info-box">
                <div class="icon">ğŸ’¡</div>
                <div class="text">
                    <strong>ë ˆí¼ëŸ´ ìˆ˜ìµì€ ë‚´ê°€ ì§ì ‘ ìœ ì¹˜í•œ ìœ ì € ê¸°ì¤€ì…ë‹ˆë‹¤.</strong><br>
                    í”Œë«í¼ ì „ì²´ ìœ ì € ìˆ˜ì™€ ê´€ê³„ì—†ì´, ë‚´ ë ˆí¼ëŸ´ ìœ ì €ì˜ ê±°ë˜ëŸ‰ Ã— ìˆ˜ìˆ˜ë£Œ Ã— í‹°ì–´ ë³´ìƒë¥ ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.
                    í”Œë«í¼ì´ ì„±ì¥í•´ë„ ì´ ìˆ˜ìµì€ <strong class="trend-up">í¬ì„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong>
                </div>
            </div>
        </div>
        
        <!-- ì„¹ì…˜ 2: LP íˆ¬ì vs ì§€ë¶„ íˆ¬ì (í”Œë«í¼ ì„±ì¥ ê¸°ì¤€) -->
        <div class="section">
            <div class="section-header">
                <div class="section-title">
LP vs ì§€ë¶„ íˆ¬ì ë¹„êµ
                </div>
                <span class="tag warning">í”Œë«í¼ ì „ì²´ ìœ ì € ê¸°ì¤€</span>
            </div>
            
            <div class="comparison-grid">
                <!-- LP íˆ¬ì -->
                <div class="compare-card lp">
                    <div class="compare-header">
                        <div class="compare-title">
LP íˆ¬ì
                        </div>
                    </div>
                    
                    <div class="stats-row" style="margin-bottom: 16px;">
                        <div class="stat-card cyan">
                            <div class="stat-label">LP Vault ê·œëª¨ (ê°€ì •)</div>
                            <div class="stat-value" id="currentVault">$10M</div>
                        </div>
                        <div class="stat-card cyan">
                            <div class="stat-label">ë‚´ LP ì§€ë¶„</div>
                            <div class="stat-value" id="myLpShare">3.57%</div>
                        </div>
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>í”Œë«í¼ ìœ ì €</th>
                                <th>LP Vault ì„±ì¥</th>
                                <th>ë‚´ LP ì§€ë¶„</th>
                                <th>LP ìˆ˜ìµ (ì—°)</th>
                                <th>APR</th>
                            </tr>
                        </thead>
                        <tbody id="lpTable"></tbody>
                    </table>
                </div>
                
                <!-- ì§€ë¶„ íˆ¬ì -->
                <div class="compare-card equity">
                    <div class="compare-header">
                        <div class="compare-title">
ì§€ë¶„ íˆ¬ì
                        </div>
                    </div>
                    
                    <div class="stats-row" style="margin-bottom: 16px;">
                        <div class="stat-card purple">
                            <div class="stat-label">ë‚´ ì§€ë¶„ìœ¨</div>
                            <div class="stat-value" id="myEquityStake">5%</div>
                        </div>
                        <div class="stat-card purple">
                            <div class="stat-label">ì„±ì¥í•´ë„</div>
                            <div class="stat-value" id="myEquityStakeFixed">5%</div>
                            <div class="stat-sub">ê³ ì •</div>
                        </div>
                    </div>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>í”Œë«í¼ ìœ ì €</th>
                                <th>ì—°ê°„ ê±°ë˜ëŸ‰</th>
                                <th>í”„ë¡œí† ì½œ ìˆ˜ìµ</th>
                                <th>ë‚´ ë°°ë‹¹ (ì—°)</th>
                                <th>ë¶„ê¸° ë°°ë‹¹</th>
                            </tr>
                        </thead>
                        <tbody id="equityTable"></tbody>
                    </table>
                </div>
            </div>
            
            <div class="info-box" style="background: rgba(168, 85, 247, 0.1); border-color: rgba(168, 85, 247, 0.2);">
                <div class="icon" style="background: rgba(168, 85, 247, 0.2);">âš¡</div>
                <div class="text">
                    <strong style="color: var(--purple);">í•µì‹¬ ì°¨ì´ì :</strong><br>
                    â€¢ <strong>LP íˆ¬ì:</strong> Vaultê°€ $10M â†’ $150Mìœ¼ë¡œ ì»¤ì§€ë©´ ë‚´ ì§€ë¶„ <strong class="trend-down">3.57% â†’ 0.24%ë¡œ í¬ì„</strong><br>
                    â€¢ <strong>ì§€ë¶„ íˆ¬ì:</strong> í”Œë«í¼ 100ë°° ì„±ì¥í•´ë„ ë‚´ ì§€ë¶„ <strong class="trend-up" id="myEquityStakeInfo">5% ê·¸ëŒ€ë¡œ</strong>, ë°°ë‹¹ë§Œ 100ë°° ì¦ê°€
                </div>
            </div>
        </div>
        
        <!-- ì„¹ì…˜ 3: ì´ ìˆ˜ìµ ìš”ì•½ -->
        <div class="section summary-section">
            <div class="section-header">
                <div class="section-title">
ì´ ìˆ˜ìµ ìš”ì•½
                </div>
                <div class="vault-tabs">
                    <button class="vault-tab active" onclick="switchVault('10m')">LP $10M</button>
                    <button class="vault-tab" onclick="switchVault('50m')">LP $50M</button>
                </div>
            </div>
            
            <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 0.9rem;">
                ë ˆí¼ëŸ´ ìˆ˜ìµ (ë‚´ ìœ ì € ê¸°ì¤€) + LP ìˆ˜ìµ (í”Œë«í¼ ê¸°ì¤€) + ì§€ë¶„ ë°°ë‹¹ (í”Œë«í¼ ê¸°ì¤€)
            </p>
            
            <div id="vault-10m" class="vault-content active">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>í”Œë«í¼ ìœ ì €</th>
                            <th>ë ˆí¼ëŸ´ ìˆ˜ìµ<br><small style="font-weight:400">(ë‚´ ìœ ì € ê³ ì •)</small></th>
                            <th>LP ìˆ˜ìµ<br><small style="font-weight:400">(í”Œë«í¼ ê¸°ì¤€)</small></th>
                            <th>ì§€ë¶„ ë°°ë‹¹<br><small style="font-weight:400">(í”Œë«í¼ ê¸°ì¤€)</small></th>
                            <th>ì´ ìˆ˜ìµ (ì—°)</th>
                            <th>ROI</th>
                        </tr>
                    </thead>
                    <tbody id="summary10m"></tbody>
                </table>
            </div>
            
            <div id="vault-50m" class="vault-content">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>í”Œë«í¼ ìœ ì €</th>
                            <th>ë ˆí¼ëŸ´ ìˆ˜ìµ<br><small style="font-weight:400">(ë‚´ ìœ ì € ê³ ì •)</small></th>
                            <th>LP ìˆ˜ìµ<br><small style="font-weight:400">(í”Œë«í¼ ê¸°ì¤€)</small></th>
                            <th>ì§€ë¶„ ë°°ë‹¹<br><small style="font-weight:400">(í”Œë«í¼ ê¸°ì¤€)</small></th>
                            <th>ì´ ìˆ˜ìµ (ì—°)</th>
                            <th>ROI</th>
                        </tr>
                    </thead>
                    <tbody id="summary50m"></tbody>
                </table>
            </div>
            
            <div class="info-box" style="background: rgba(16, 185, 129, 0.1); border-color: rgba(16, 185, 129, 0.2);">
                <div class="icon" style="background: rgba(16, 185, 129, 0.2);">ğŸ’¡</div>
                <div class="text">
                    <strong style="color: var(--success);">ìˆ˜ìµ ìˆ˜ë ¹ ë°©ì‹:</strong> ë ˆí¼ëŸ´/LP ìˆ˜ìµì€ ì‹¤ì‹œê°„ ì¸ì¶œ ê°€ëŠ¥, ì§€ë¶„ ë°°ë‹¹ì€ ë¶„ê¸°ë³„ ì§€ê¸‰
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        LuminaExchange Investment Simulator v6.0 | 2025<br>
        <small>* ëª¨ë“  ìˆ˜ì¹˜ëŠ” ì¶”ì •ì¹˜ì´ë©° ì‹¤ì œ ê²°ê³¼ì™€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
    </footer>
    
    <script>
        // Constants
        const FEE = 0.0005;         // 0.05% (ë ˆí¼ëŸ´ í• ì¸ ì ìš©, í¸ë„ ê¸°ì¤€)
        const REF_RATE = 0.25;      // Tier 5: 25%
        const LP_SHARE = 0.45;      // 75% Ã— 60%
        const PROTOCOL_SHARE = 0.30; // 75% Ã— 40%
        
        // í”Œë«í¼ ì„±ì¥ ì‹œë‚˜ë¦¬ì˜¤ (ë‚´ ë ˆí¼ëŸ´ê³¼ ë³„ê°œ)
        const SCENARIOS = [
            { users: 1000, vaultMult: 1, label: '1,000ëª…' },
            { users: 5000, vaultMult: 3, label: '5,000ëª…' },
            { users: 10000, vaultMult: 5, label: '10,000ëª…' },
            { users: 50000, vaultMult: 10, label: '50,000ëª…' },
            { users: 100000, vaultMult: 15, label: '100,000ëª…' }
        ];
        
        let baseVault = 10000000; // $10M
        
        const $ = id => document.getElementById(id);
        const fmt = (n, d = 0) => n.toLocaleString('ko-KR', { maximumFractionDigits: d });
        const fmtUSD = n => n >= 1e9 ? '$' + fmt(n/1e9, 2) + 'B' : n >= 1e6 ? '$' + fmt(n/1e6, 1) + 'M' : n >= 1e3 ? '$' + fmt(n/1e3, 0) + 'K' : '$' + fmt(n);
        const fmtKRW = n => fmt(n/1e8, 1) + 'ì–µ';
        const fmtPct = (n, d = 2) => fmt(n, d) + '%';
        
        function getTier(vol) {
            if (vol >= 5e8) return { rate: 0.25, label: 'Tier 5', pct: '25%' };
            if (vol >= 1e8) return { rate: 0.20, label: 'Tier 4', pct: '20%' };
            if (vol >= 5e7) return { rate: 0.16, label: 'Tier 3', pct: '16%' };
            if (vol >= 1e7) return { rate: 0.12, label: 'Tier 2', pct: '12%' };
            return { rate: 0.08, label: 'Tier 1', pct: '8%' };
        }
        
        const COMPANY_VALUE = 100e8; // íšŒì‚¬ ê°€ì¹˜ 100ì–µì›
        const MAX_EQUITY_INVEST = 20e8; // ìµœëŒ€ ì§€ë¶„ íˆ¬ì 20ì–µì›
        const MAX_EQUITY_STAKE = 0.20; // ìµœëŒ€ ì§€ë¶„ íŒë§¤ 20%

        function calculate() {
            // ì…ë ¥ê°’ ì½ê¸°
            const investKRW = parseFloat($('totalInvestment').value) * 1e8;
            let eqRatio = parseFloat($('equityRatio').value) / 100;
            const volPerUser = parseFloat($('volumePerUser').value) * 1e6;
            const loss = parseFloat($('lossRate').value);
            const rate = parseFloat($('exchangeRate').value);
            const myRefs = parseInt($('myReferrals').value);

            // ì§€ë¶„ íˆ¬ìê¸ˆ ê³„ì‚° (ìµœëŒ€ 20ì–µ ì œí•œ)
            let eqInvestKRW = investKRW * eqRatio;
            if (eqInvestKRW > MAX_EQUITY_INVEST) {
                eqInvestKRW = MAX_EQUITY_INVEST;
                eqRatio = MAX_EQUITY_INVEST / investKRW;
                $('equityRatio').value = (eqRatio * 100).toFixed(0);
            }

            const lpRatio = 1 - eqRatio;
            $('lpRatio').value = (lpRatio * 100).toFixed(0);

            // íˆ¬ìê¸ˆ ê³„ì‚°
            const lpInvestKRW = investKRW * lpRatio;
            const eqInvestUSD = eqInvestKRW / rate;
            const lpInvestUSD = lpInvestKRW / rate;

            // ì§€ë¶„ìœ¨ ìë™ ê³„ì‚° (ì§€ë¶„íˆ¬ìê¸ˆ / 100ì–µ, ìµœëŒ€ 20%)
            const eqStake = Math.min(eqInvestKRW / COMPANY_VALUE, MAX_EQUITY_STAKE);
            
            // ê¸°ë³¸ ì •ë³´ í‘œì‹œ
            $('equityInvestKRW').textContent = fmtKRW(eqInvestKRW);
            $('equityInvestUSD').textContent = '$' + fmt(eqInvestUSD);
            $('lpInvestKRW').textContent = fmtKRW(lpInvestKRW);
            $('lpInvestUSD').textContent = '$' + fmt(lpInvestUSD);
            $('equityStakeDisplay').textContent = fmtPct(eqStake * 100, 1);
            $('myEquityStake').textContent = fmtPct(eqStake * 100, 1);
            $('myEquityStakeFixed').textContent = fmtPct(eqStake * 100, 1);
            $('myEquityStakeInfo').textContent = fmtPct(eqStake * 100, 1) + ' ê·¸ëŒ€ë¡œ';
            
            // ===== ë‚´ ë ˆí¼ëŸ´ ìˆ˜ìµ (ê³ ì •) =====
            const myRefVol = myRefs * volPerUser; // ì›”ê°„
            const myRefVolAnnual = myRefVol * 12;
            const tier = getTier(myRefVol);
            const refIncome = myRefVolAnnual * FEE * tier.rate;
            
            $('myRefUsers').textContent = fmt(myRefs) + 'ëª…';
            $('myRefVolume').textContent = fmtUSD(myRefVol);
            $('myRefTier').textContent = tier.label;
            $('myRefIncome').textContent = fmtUSD(refIncome);
            $('myRefIncomeKRW').textContent = fmtKRW(refIncome * rate);
            
            // ===== LP íˆ¬ì (í”Œë«í¼ ê¸°ì¤€) =====
            const baseLpShare = lpInvestUSD / baseVault;
            $('currentVault').textContent = fmtUSD(baseVault);
            $('myLpShare').textContent = fmtPct(baseLpShare * 100);
            
            // LP í…Œì´ë¸”
            const lpTb = $('lpTable');
            lpTb.innerHTML = '';
            SCENARIOS.forEach((s, i) => {
                const vault = baseVault * s.vaultMult;
                const share = lpInvestUSD / vault;
                const platformVol = s.users * volPerUser * 12;
                const lpRev = (platformVol * loss) + (platformVol * FEE * LP_SHARE);
                const myLpIncome = lpRev * share;
                const apr = (myLpIncome / lpInvestUSD) * 100;
                const cls = i > 0 ? 'trend-down' : '';

                lpTb.innerHTML += `<tr>
                    <td><div class="cell-main">${s.label}</div></td>
                    <td><div class="cell-main">${fmtUSD(vault)}</div></td>
                    <td><div class="cell-main ${cls}">${fmtPct(share * 100)}</div></td>
                    <td>
                        <div class="cell-main text-cyan">${fmtUSD(myLpIncome)}</div>
                        <div class="cell-sub">${fmtKRW(myLpIncome * rate)}</div>
                    </td>
                    <td><div class="cell-main text-cyan">${fmtPct(apr, 1)}</div></td>
                </tr>`;
            });
            
            // ===== ì§€ë¶„ íˆ¬ì (í”Œë«í¼ ê¸°ì¤€) =====
            const eqTb = $('equityTable');
            eqTb.innerHTML = '';
            SCENARIOS.forEach((s, i) => {
                const platformVol = s.users * volPerUser * 12;
                const protocolRev = platformVol * FEE * PROTOCOL_SHARE;
                const myDividend = protocolRev * eqStake;
                const quarterly = myDividend / 4;
                const cls = i > 0 ? 'trend-up' : '';
                
                eqTb.innerHTML += `<tr>
                    <td><div class="cell-main">${s.label}</div></td>
                    <td><div class="cell-main">${fmtUSD(platformVol)}</div></td>
                    <td><div class="cell-main">${fmtUSD(protocolRev)}</div></td>
                    <td>
                        <div class="cell-main text-purple ${cls}">${fmtUSD(myDividend)}</div>
                        <div class="cell-sub">${fmtKRW(myDividend * rate)}</div>
                    </td>
                    <td><div class="cell-main">${fmtUSD(quarterly)}</div></td>
                </tr>`;
            });
            
            // ===== ì´ ìˆ˜ìµ ìš”ì•½ =====
            updateSummary('summary10m', 10000000, lpInvestUSD, eqStake, volPerUser, loss, refIncome, investKRW, rate);
            updateSummary('summary50m', 50000000, lpInvestUSD, eqStake, volPerUser, loss, refIncome, investKRW, rate);
        }
        
        function updateSummary(id, vault, lpInvestUSD, eqStake, volPerUser, loss, refIncome, investKRW, rate) {
            const tb = $(id);
            tb.innerHTML = '';
            
            SCENARIOS.forEach(s => {
                const mult = id.includes('10m') ? s.vaultMult : Math.max(1, s.vaultMult * 0.6);
                const currentVault = vault * mult;
                const share = lpInvestUSD / currentVault;
                const platformVol = s.users * volPerUser * 12;
                
                // LP ìˆ˜ìµ
                const lpRev = (platformVol * loss) + (platformVol * FEE * LP_SHARE);
                const lpIncome = lpRev * share;
                
                // ì§€ë¶„ ë°°ë‹¹
                const protocolRev = platformVol * FEE * PROTOCOL_SHARE;
                const dividend = protocolRev * eqStake;
                
                // ì´ ìˆ˜ìµ = ë ˆí¼ëŸ´(ê³ ì •) + LP + ì§€ë¶„ë°°ë‹¹
                const total = refIncome + lpIncome + dividend;
                const roi = (total / (investKRW / rate)) * 100;

                tb.innerHTML += `<tr>
                    <td><div class="cell-main">${s.label}</div></td>
                    <td>
                        <div class="cell-main text-orange">${fmtUSD(refIncome)}</div>
                        <div class="cell-sub">${fmtKRW(refIncome * rate)}</div>
                    </td>
                    <td>
                        <div class="cell-main text-cyan">${fmtUSD(lpIncome)}</div>
                        <div class="cell-sub">${fmtKRW(lpIncome * rate)}</div>
                    </td>
                    <td>
                        <div class="cell-main text-purple">${fmtUSD(dividend)}</div>
                        <div class="cell-sub">${fmtKRW(dividend * rate)}</div>
                    </td>
                    <td>
                        <div class="cell-main total-cell">${fmtUSD(total)}</div>
                        <div class="cell-sub">${fmtKRW(total * rate)}</div>
                    </td>
                    <td><div class="roi-badge">${fmt(roi, 0)}%</div></td>
                </tr>`;
            });
        }
        
        function switchVault(v) {
            document.querySelectorAll('.vault-tab').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.vault-content').forEach(c => c.classList.remove('active'));
            
            if (v === '10m') {
                baseVault = 10000000;
                document.querySelector('.vault-tab:first-child').classList.add('active');
                $('vault-10m').classList.add('active');
            } else {
                baseVault = 50000000;
                document.querySelector('.vault-tab:last-child').classList.add('active');
                $('vault-50m').classList.add('active');
            }
            calculate();
        }
        
        // ì´ íˆ¬ìê¸ˆ ë³€ê²½ ì‹œ ê¸°ë³¸ ë¹„ìœ¨ ìë™ ì„¤ì •
        function onInvestmentChange() {
            const investKRW = parseFloat($('totalInvestment').value) * 1e8;
            if (investKRW <= 40e8) {
                // 40ì–µ ì´í•˜ë©´ 50:50
                $('equityRatio').value = 50;
            } else {
                // 40ì–µ ì´ˆê³¼ë©´ ì§€ë¶„ 20ì–µ ê³ ì •, ë¹„ìœ¨ ìë™ ê³„ì‚°
                const eqRatio = (MAX_EQUITY_INVEST / investKRW) * 100;
                $('equityRatio').value = eqRatio.toFixed(0);
            }
            calculate();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        $('totalInvestment').addEventListener('input', onInvestmentChange);
        $('totalInvestment').addEventListener('change', onInvestmentChange);

        ['equityRatio', 'myReferrals', 'volumePerUser', 'lossRate', 'exchangeRate'].forEach(id => {
            $(id).addEventListener('input', calculate);
            $(id).addEventListener('change', calculate);
        });

        // ì´ˆê¸° ê³„ì‚°
        calculate();

        // ===== íŒì—… ì„¤ì • ê¸°ëŠ¥ =====
        function openSettings() {
            // ë©”ì¸ ê°’ì„ íŒì—…ì— ë™ê¸°í™”
            $('popupTotalInvestment').value = $('totalInvestment').value;
            $('popupEquityRatio').value = $('equityRatio').value;
            $('popupMyReferrals').value = $('myReferrals').value;
            $('popupVolumePerUser').value = $('volumePerUser').value;
            $('popupLossRate').value = $('lossRate').value;
            $('popupExchangeRate').value = $('exchangeRate').value;
            $('settingsOverlay').classList.add('active');
        }

        function closeSettings() {
            $('settingsOverlay').classList.remove('active');
        }

        function closeSettingsOutside(e) {
            if (e.target === $('settingsOverlay')) {
                closeSettings();
            }
        }

        // íŒì—… ì…ë ¥ â†’ ë©”ì¸ ë™ê¸°í™” ë° ê³„ì‚°
        function syncFromPopup(popupId, mainId) {
            $(mainId).value = $(popupId).value;
            if (mainId === 'totalInvestment') {
                onInvestmentChange();
            } else {
                calculate();
            }
        }

        // íŒì—… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        $('popupTotalInvestment').addEventListener('input', () => syncFromPopup('popupTotalInvestment', 'totalInvestment'));
        $('popupEquityRatio').addEventListener('input', () => {
            $('equityRatio').value = $('popupEquityRatio').value;
            calculate();
        });
        $('popupMyReferrals').addEventListener('input', () => syncFromPopup('popupMyReferrals', 'myReferrals'));
        $('popupVolumePerUser').addEventListener('input', () => syncFromPopup('popupVolumePerUser', 'volumePerUser'));
        $('popupLossRate').addEventListener('change', () => syncFromPopup('popupLossRate', 'lossRate'));
        $('popupExchangeRate').addEventListener('input', () => syncFromPopup('popupExchangeRate', 'exchangeRate'));

        // ESC í‚¤ë¡œ ë‹«ê¸°
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeSettings();
        });
    </script>
</body>
</html>
